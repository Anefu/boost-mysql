#
# Copyright (c) 2019-2022 Ruben Perez Hidalgo (rubenperez038 at gmail dot com)
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#

import os ;

# The hostname to use for examples
local hostname = [ os.environ BOOST_MYSQL_SERVER_HOST ] ;
if $(hostname) = ""
{
    hostname = "localhost" ;
}

# Regular examples
local default_examples =
    tutorial
    value
    query_sync
    query_async_callbacks
    query_async_coroutines
    query_async_coroutinescpp20
    query_async_futures
    metadata
    prepared_statements
    default_completion_tokens
    ssl
;

for local example in $(default_examples)
{
    unit-test "boost_mysql_example_$(example)" 
        :
            "$(example).cpp"
            /boost/mysql//boost_mysql
            /boost/coroutine//boost_coroutine
        :
            <testing.arg>"example_user example_password $(hostname)"
        ;
}

# UNIX sockets
unit-test boost_mysql_example_unix_socket :  unix_socket.cpp /boost/mysql//boost_mysql : <testing.arg>"example_user example_password" ;
explicit  boost_mysql_example_unix_socket ;
